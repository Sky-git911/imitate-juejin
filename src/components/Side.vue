<template>
  <div class="sidebar">
    <!-- ç­¾åˆ°æ¡† -->
    <div class="box1">
      <div class="firstline">
        <div class="flex">
          <el-icon class="icon_cld">
            <Calendar />
          </el-icon>
          <span class="text_time">{{ msg }}!</span>
        </div>

        <el-button round class="button_sign_in">å»ç­¾åˆ°</el-button>
      </div>
      <div class="second_line">ç‚¹äº®ä½ åœ¨ç¤¾åŒºçš„æ¯ä¸€å¤©</div>
    </div>

    <side-ad></side-ad>

    <!-- å¹¿å‘Šæ¡† -->
    <!-- <div class="ad" v-for="ad in ads" :key="ad.id">
      <a :href="ad.link">
        <img :src="ad.imgurl" alt="" class="adimg" />
      </a>
      <div class="ad_control">
        <el-icon class="icon_close" @click="closebox(ad.id)"
          ><CloseBold
        /></el-icon>
        <a
          href="https://bd.juejin.cn?utm_campaign=bd&utm_source=web&utm_medium=banner"
          target="_blank"
          class="ad_text"
        >
          <span class="pub_text">æŠ•æ”¾ </span>
          <span>å¹¿å‘Š</span>
        </a>
      </div>
    </div> -->

    <!-- appä¸‹è½½æ¡† -->
    <!-- <div class="app_content">
      <img
        src="//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/img/home.59780ae.png"
        alt=""
        class="app_img"
      />
      <div class="app_tex">
        <div class="headline">ä¸‹è½½ç¨€åœŸæ˜é‡‘APP</div>
        <div class="desc">ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</div>
      </div>
    </div> -->

    <!-- ä½œè€…æ¦œ -->
    <div class="authorlist">
      <el-card class="box-card" body-style="padding:0;" shadow="never">
        <template #header>
          <div class="card-header">
            <span>ğŸ–ï¸ä½œè€…æ¦œ</span>
          </div>
        </template>

        <div class="text item" v-for="author in topAuthors" :key="author.id">
          <a href="javascript:;" class="flex author">
            <div>
              <el-avatar :src="author.avatar_large" class="author_img" />
            </div>
            <div class="author_info">
              <div class="author_name">
                <span>{{ author.user_name }}</span>
                <span
                  ><img
                    :src="author.lvimg"
                    alt=""
                    title="åˆ›ä½œç­‰çº§"
                    class="lvimg"
                /></span>
              </div>
              <div class="author_desc">
                {{ author.job_title }}
                <span v-if="author.company">@{{ author.company }}</span>
              </div>
            </div>
          </a>
        </div>
      </el-card>
      <div class="more">
        <a href="javascript:;">
          <span>å®Œæ•´æ¦œå• </span>
          <el-icon class="icon_rig"><ArrowRightBold /></el-icon>
        </a>
      </div>
    </div>

    <!-- å¤–è”åˆ—è¡¨ -->
    <div class="linklist">
      <el-card class="box-card" body-style="padding:0;" shadow="never">
        <div v-for="link in linklist" :key="link.id" class="text item">
          <a href="javascript:;" class="flex">
            <el-avatar
              shape="square"
              :size="35"
              :src="link.img"
              class="link_img"
            />
            <span class="title">{{ link.title }}</span>
          </a>
        </div>
      </el-card>
    </div>

    <!-- footer -->
    <div class="side_footer">
        <ul class="info_list flex">
          <li>
            <a href="javascript:;" class="link_text">ç”¨æˆ·åè®®</a>
          </li>
          <li>
            <a href="javascript:;" class="link_text">è¥ä¸šæ‰§ç…§</a>
          </li>
          <li>
            <a href="javascript:;" class="link_text">éšç§æ”¿ç­–</a>
          </li>
          <li>
            <a href="javascript:;" class="link_text">å…³äºæˆ‘ä»¬</a>
          </li>
        </ul>
        <ul class="info_list flex">
          <li>
            <a href="javascript:;" class="link_text">ç«™ç‚¹åœ°å›¾</a>
          </li>
          <li>
            <a href="javascript:;" class="link_text">ä½¿ç”¨æŒ‡å—</a>
          </li>
          <li>
            <a href="javascript:;" class="link_text">å‹æƒ…é“¾æ¥</a>
          </li>
          <li>
            <a href="javascript:;" class="link_text">æ›´å¤šæ–‡ç« </a>
          </li>
        </ul>
        <ul class="info_list flex">
          <li>
            <a href="javascript:;" class="link_text"></a>
          </li>
        </ul>
        <ul class="info_list flex">
          <li>
            <a href="javascript:;" class="link_text">äº¬ICPå¤‡18012699å·-3</a>
          </li>
        </ul>
        <ul class="info_list flex">
          <li>
            <a href="javascript:;" class="link_text">
              <img src="//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/img/police.d0289dc.png" alt="" class="plice_img">
              äº¬å…¬ç½‘å®‰å¤‡11010802026719å·
            </a>
          </li>
        </ul>
        <ul class="info_list flex">
          <li>
            <span class="link_text">ç‰ˆæƒæ‰€æœ‰ï¼šåŒ—äº¬åŒ—æ¯”ä¿¡æ¯æŠ€æœ¯æœ‰é™å…¬å¸</span>
          </li>
        </ul>
        <ul class="info_list flex">
          <li>
            <span class="link_text">å…¬å¸åœ°å€ï¼šåŒ—äº¬å¸‚æµ·æ·€åŒºä¿¡æ¯è·¯ç”²28å·13å±‚Båº§13B-5</span>
          </li>
        </ul>
        <ul class="info_list flex">
          <li>
            <span class="link_text">å…¬å¸åº§æœºï¼š010-83434395</span>
          </li>
        </ul>
        <ul class="info_list flex">
          <li>
            <span class="link_text">ä¸¾æŠ¥é‚®ç®±ï¼š</span>
            <a href="javascript:;" class="link_text"> feedback@xitu.io</a>
          </li>
        </ul>
        <ul class="info_list flex">
          <li>
            <a href="javascript:;" class="link_text">Â©2022 ç¨€åœŸæ˜é‡‘</a>
          </li>
        </ul>
        <ul class="flex">
          <li>
            <a href="javascript:;">
              <img src="//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/img/weibo.0cd39f5.png" alt="å¾®åš" class="weibo">
            </a>
          </li>
          <li>
            <a href="javascript:;">
              <img src="//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/img/wechat.ce329e6.png" alt="å¾®ä¿¡" class="wechat">
            </a>
          </li>
        </ul>
      </div>
  </div>
</template>

<style scoped>
* {
  box-sizing: border-box;
}

.sidebar {
  background-color: #f2f3f5;
  width: 20.2rem;
  padding: 10px auto;
}
/* å¡ç‰‡æ ·å¼ */
.text {
  font-size: 14px;
}
.item {
  padding: auto 0;
  padding: 12px 15px;
}

.box-card {
  width: 100%;
  border: 0;
}

.item:hover {
  background-color: hsla(0, 0%, 84.7%, 0.1);
}
/* ç­¾åˆ°æ¡† */
.box1 {
  height: 96px;
  margin-bottom: 16px;
  background-color: #fff;
  padding: 16px;
}
.firstline {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  height: 32px;
  margin-bottom: 8px;
}

.flex {
  display: flex;
  flex-direction: row;
}

.text_time {
  display: block;
  font-size: 20px;
  font-weight: 500;
  margin-top: 2px;
}
.icon_cld {
  display: block;
  color: darksalmon;
  width: 34px;
  height: 24px;
  font-size: 24px;
}
.button_sign_in {
  display: block;
  color: #1e80ff;
  border: 1px solid #1e80ff;
}
.second_line {
  margin: 5px;
  color: #4e5969;
  font-size: 14px;
  font-weight: 400;
  text-align: center;
}

/* ä½œè€…æ¦œ */
.authorlist,
.linklist {
  background-color: #fff;
  margin-bottom: 16px;
}
.card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 1.16rem;
  color: #333;
}
.author_img {
  position: relative;
  top: 0.5rem;
}
.author_img,
.link_img {
  width: 3rem;
  height: 3rem;
  margin-right: 6px;
}
.author_info {
  overflow: hidden;
  text-overflow: ellipsis;
  margin: auto 0;
}
.author_name,
.title {
  font-size: 14px;
  font-weight: 400;
  color: #333;
  margin-bottom: 5px;
}
.author_desc {
  color: #909090;
  font-size: 12px;
  margin-bottom: 3px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.lvimg {
  width: 35px;
  height: 16px;
  margin: 5px 0 0 5px;
}
.more {
  color: #007fff;
  padding: 1.2rem 0;
  text-align: center;
  border-top: 1px solid hsla(0, 0%, 59.2%, 0.1);
  font-size: 16px;
}
.icon_rig {
  font-size: 14px;
}

/* å¤–é“¾åˆ—è¡¨ */
.title {
  display: block;
  margin: auto 3px;
}

/* ä¾§è¾¹æ footer */

ul.info_list {
  justify-content: space-between;
}
ul.info_list li{
  display: block;
}
ul.info_list li  .link_text{
  font-size: 14px;
  line-height: 1.6;
  color: #9aa3ab;
}
ul.info_list li a:hover{
  color: #007fff;
}
.plice_img{
  vertical-align: middle;
}
.weibo, .wechat{
  width: 30px;
  margin-top: 20px;
}
.weibo{
  margin-right: 10px;
}
</style>

<script>
import SideAd from "@/components/Side-Ad.vue";

export default {
  components: {
    SideAd,
  },
  name: "Side",
  data() {
    return {
      msg: "",
      
      topAuthors: [],
      linklist: [
        {
          id: "001",
          img: "//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/img/juejin-tutu.d58819c.png",
          title: "ç¨€åœŸæ˜é‡‘æ¼«æ¸¸æŒ‡å—",
        },
        {
          id: "002",
          img: "//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/img/juejin-extension-icon.4b79fb4.png",
          title: "å®‰è£…æ˜é‡‘æµè§ˆå™¨æ’ä»¶",
        },
        {
          id: "003",
          img: "//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/img/juejin-miner.b78347c.png",
          title: "å‰å¾€æ˜é‡‘ç¿»è¯‘è®¡åˆ’",
        },
      ],
    };
  },
  methods: {
    // æ ¹æ®æ—¶é—´æ˜¾ç¤ºé—®å€™è¯­
    getTime() {
      let time = new Date();
      let hour = time.getHours();
      if (hour >= 5 && hour <= 12) {
        this.msg = "æ—©ä¸Šå¥½";
      } else if (hour > 12 && hour < 18) {
        this.msg = "ä¸‹åˆå¥½";
      } else {
        this.msg = "æ™šä¸Šå¥½";
      }
    },

    // è·å–ä½œè€…æ¦œå•
    async getAuthorRank() {
      const res = await this.$api.getAuthorRank();
      // console.log(res);
      this.topAuthors = res.splice(0, 3);
      this.topAuthors.forEach((author) => {
        // author.lvimg = this.$api.getLevelImg(author.level);
        this.getlvimg(author.level).then((res) => {
          author.lvimg = res;
        });
      });
      // console.log(this.topAuthors);
    },
    async getlvimg(level) {
      const res = await this.$api.getLevelImg(level);
      // console.log(res);
      return res;
    },
  },

  mounted() {
    this.getTime();
    this.getAuthorRank();
  },
};
</script>
